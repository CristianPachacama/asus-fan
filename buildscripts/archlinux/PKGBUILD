# Maintainer: Markus Meissner <coder@safemailbox.de>

pkgname=asus-fan-dkms
pkgver=0.9
pkgrel=1
_realname=asus-fan
_modname=asus_fan
pkgdesc="Kernel module allowing to controll (both) fan inside various asus laptops"
arch=('i686' 'x86_64')
url=("http://github.com/daringer/asus-fan")
license=('GPL')
depends=('dkms')
install=asus-fan-dkms.install
source=("https://github.com/daringer/asus-fan/archive/v${pkgver}.tar.gz")

package() {
  cd ${srcdir}/${_modname}-${pkgver}
  install -dm755 "${pkgdir}/usr/src/${_modname}-${pkgver}/"
  install -D -m644 "asus-fan.c" "${pkgdir}/usr/src/${_modname}-${pkgver}/"
  install -D -m644 "Makefile.dkms" "${pkgdir}/usr/src/${_modname}-${pkgver}/Makefile"
  sed "s/#MODULE_VERSION#/${pkgver}/" "${srcdir}/dkms/dkms.conf" > "${pkgdir}/usr/src/${_modname}-${pkgver}/dkms.conf"
}

